{"ast":null,"code":"import { useEffect, useRef } from 'react';\n\nvar useAsyncTimeout = function useAsyncTimeout(callback, delay) {\n  var savedCallback = useRef(callback);\n  useEffect(function () {\n    savedCallback.current = callback;\n  });\n  useEffect(function () {\n    var id = null;\n\n    var tick = function tick() {\n      var promise = savedCallback.current();\n\n      if (promise instanceof Promise) {\n        promise.then(function () {\n          id = setTimeout(tick, delay);\n        });\n      } else {\n        id = setTimeout(tick, delay);\n      }\n    };\n\n    if (id !== null) {\n      id = setTimeout(tick, delay);\n      return function () {\n        return clearTimeout(id);\n      };\n    } else {\n      tick();\n      return;\n    }\n  }, [delay]);\n};\n\nexport default useAsyncTimeout;","map":{"version":3,"sources":["/Users/alcipir/Repos/bitcoin-abc/web/cashtab/mobile/hooks/useAsyncTimeout.js"],"names":["useEffect","useRef","useAsyncTimeout","callback","delay","savedCallback","current","id","tick","promise","Promise","then","setTimeout","clearTimeout"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,MAApB,QAAkC,OAAlC;;AAEA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,QAAD,EAAWC,KAAX,EAAqB;AACzC,MAAMC,aAAa,GAAGJ,MAAM,CAACE,QAAD,CAA5B;AAEAH,EAAAA,SAAS,CAAC,YAAM;AACZK,IAAAA,aAAa,CAACC,OAAd,GAAwBH,QAAxB;AACH,GAFQ,CAAT;AAIAH,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIO,EAAE,GAAG,IAAT;;AACA,QAAMC,IAAI,GAAG,SAAPA,IAAO,GAAM;AACf,UAAMC,OAAO,GAAGJ,aAAa,CAACC,OAAd,EAAhB;;AAEA,UAAIG,OAAO,YAAYC,OAAvB,EAAgC;AAC5BD,QAAAA,OAAO,CAACE,IAAR,CAAa,YAAM;AACfJ,UAAAA,EAAE,GAAGK,UAAU,CAACJ,IAAD,EAAOJ,KAAP,CAAf;AACH,SAFD;AAGH,OAJD,MAIO;AACHG,QAAAA,EAAE,GAAGK,UAAU,CAACJ,IAAD,EAAOJ,KAAP,CAAf;AACH;AACJ,KAVD;;AAYA,QAAIG,EAAE,KAAK,IAAX,EAAiB;AACbA,MAAAA,EAAE,GAAGK,UAAU,CAACJ,IAAD,EAAOJ,KAAP,CAAf;AACA,aAAO;AAAA,eAAMS,YAAY,CAACN,EAAD,CAAlB;AAAA,OAAP;AACH,KAHD,MAGO;AACHC,MAAAA,IAAI;AACJ;AACH;AACJ,GArBQ,EAqBN,CAACJ,KAAD,CArBM,CAAT;AAsBH,CA7BD;;AA+BA,eAAeF,eAAf","sourcesContent":["import { useEffect, useRef } from 'react';\n\nconst useAsyncTimeout = (callback, delay) => {\n    const savedCallback = useRef(callback);\n\n    useEffect(() => {\n        savedCallback.current = callback;\n    });\n\n    useEffect(() => {\n        let id = null;\n        const tick = () => {\n            const promise = savedCallback.current();\n\n            if (promise instanceof Promise) {\n                promise.then(() => {\n                    id = setTimeout(tick, delay);\n                });\n            } else {\n                id = setTimeout(tick, delay);\n            }\n        };\n\n        if (id !== null) {\n            id = setTimeout(tick, delay);\n            return () => clearTimeout(id);\n        } else {\n            tick();\n            return;\n        }\n    }, [delay]);\n};\n\nexport default useAsyncTimeout;\n"]},"metadata":{},"sourceType":"module"}